(function(){const t=document.querySelector(".nav-toggle"),e=document.querySelector(".nav");t&&e&&t.addEventListener("click",()=>e.classList.toggle("open"));const n=document.getElementById("year");n&&(n.textContent=(new Date).getFullYear())})();async function loadJSON(t){const e=await fetch(t);if(!e.ok)throw new Error(t);return e.json()}function el(t,e={},...n){const a=document.createElement(t);return Object.entries(e).forEach(([t,e])=>{"class"===t?a.className=e:a.setAttribute(t,e)}),n.forEach((t=>a.append(t))),a}function renderAccordion(t,e,n){const a=el("div",{class:"accordion"});e.forEach((t=>{const e=n.filter((e=>e.inSummary)).map((e=>t[e.key])).filter(Boolean),r=e.join(" — "),o=el("details",{class:"acc"}),s=el("summary",{},r||"(Sans titre)"),i=el("div",{class:"acc-body"});n.filter((t=>!t.inSummary)).forEach((e=>{t[e.key]&&i.append(el("p",{},el("span",{class:"badge"},e.label+":")," ",t[e.key]))})),o.append(s,i),a.append(o)})),t.innerHTML="",t.append(a)}document.addEventListener("DOMContentLoaded",async()=>{const t=document.getElementById("seminarList");if(t){const e=await loadJSON("assets/seminars.json");renderAccordion(t,e,[{key:"month",label:"Mois",inSummary:!0},{key:"title",label:"Exposé",inSummary:!0},{key:"speaker",label:"Orateur·rice",inSummary:!0},{key:"abstract",label:"Résumé",inSummary:!1},{key:"bio",label:"Bio",inSummary:!1},{key:"links",label:"Liens",inSummary:!1}])}const e=document.getElementById("articleList");if(e){const t=await loadJSON("assets/articles.json");renderAccordion(e,t,[{key:"title",label:"Titre",inSummary:!0},{key:"author",label:"Auteur·rice",inSummary:!0},{key:"summary",label:"Résumé",inSummary:!1},{key:"url",label:"Lien",inSummary:!1}])}const n=document.getElementById("workshopList");if(n){const t=await loadJSON("assets/workshops.json");renderAccordion(n,t,[{key:"title",label:"Atelier",inSummary:!0},{key:"place",label:"Lieu",inSummary:!0},{key:"date",label:"Date",inSummary:!0},{key:"description",label:"Description",inSummary:!1},{key:"inscription",label:"Inscription",inSummary:!1}])}});