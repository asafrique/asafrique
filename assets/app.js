(function(){const t=document.querySelector(".nav-toggle"),e=document.querySelector(".nav");t&&e&&t.addEventListener("click",()=>e.classList.toggle("open"));const n=document.getElementById("year");n&&(n.textContent=(new Date).getFullYear())})();async function loadJSON(t){const e=await fetch(t);if(!e.ok)throw new Error(t);return e.json()}function el(t,e={},...n){const a=document.createElement(t);for(const[t,o]of Object.entries(e))"class"===t?a.className=o:a.setAttribute(t,o);for(const t of n)a.append(t);return a}function renderAccordion(t,e){const n=el("div",{class:"accordion"});for(const t of e){const e=[t.title,t.speaker,t.month].filter(Boolean).join(" — "),a=el("details",{class:"acc"}),o=el("summary",{},e||"(Sans titre)"),s=el("div",{class:"acc-body"});(t.speaker||t.month)&&s.append(el("p",{class:"meta"},`${t.month||""}${t.speaker?" · "+t.speaker:""}`)),t.abstract&&s.append(el("p",{},t.abstract)),t.bio&&s.append(el("p",{},el("strong",{},"Bio: "),t.bio));const r=el("div",{class:"ctas"});t.slides&&r.append(el("a",{href:t.slides,class:"btn-link",target:"_blank",rel:"noopener"},"Slides")),t.video&&r.append(el("a",{href:t.video,class:"btn-link",target:"_blank",rel:"noopener"},"Vidéo")),r.childNodes.length&&s.append(r),a.append(o,s),n.append(a)}t.innerHTML="",t.append(n)}async function initSeminarTabs(){const t=document.getElementById("yearTabs"),e=document.getElementById("seminarPanel");if(!t||!e)return;t.addEventListener("click",async n=>{const a=n.target.closest("[data-year]");if(!a)return;for(const e of t.querySelectorAll("[data-year]"))e.setAttribute("aria-selected","false");a.setAttribute("aria-selected","true");const o=a.getAttribute("data-year"),s=await loadJSON(`assets/seminars-${o}.json`);renderAccordion(e,s),history.replaceState(null,"",`#y${o}`)});const n=(location.hash||"").replace("#y",""),a=n&&t.querySelector(`[data-year="${n}"]`)||t.querySelector("[data-year]");a&&a.click()}document.addEventListener("DOMContentLoaded",initSeminarTabs);